<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Heirloom (Prototype)</title>
<link href="styles.css?v=9.0" rel="stylesheet"/>
</head>
<body>
<div class="app" id="app">
<header class="topbar hidden" id="topbar">
<div>
<div class="title">Heirloom</div>
<div class="subtitle">Web Prototype v0.1</div>
</div>
<div class="topbar-actions">
<button class="btn ghost" disabled="" id="btnNewEvent">New Event</button>
<button class="btn ghost" id="btnTheme" title="Toggle theme">Theme: Ink</button>
<button class="btn danger" id="btnReset">Reset</button>
</div>
</header>
<main class="main">
<!-- Main Menu -->
<section class="card" id="menuScreen">
  <div class="menuHero">
    <h1 class="menuTitle">Heirloom</h1>
  </div>
  <div class="menuActions">
    <button class="btn primary btn-wide" id="btnMenuStart">Start</button>
    <button class="btn ghost btn-wide" id="btnLegacy">Upgrades</button>
    <button class="btn ghost btn-wide" id="btnMenuTheme">Theme: Ink</button>
  </div>
</section>

<!-- Start Screen -->
<section class="card hidden" id="startScreen">
<div class="create-head">
<h2>Start a Run</h2>
<p class="muted">Throughout history, the threads of fate have ever led to this moment…</p>
</div>
<div class="create">
<!-- Identity -->
<section class="create-section">
<div class="section-title">
<h3>Identity</h3>
<div class="hint">Shown in your status line.</div>
</div>
<div class="form-grid">
<div class="field">
<label for="charName">Given name</label>
<input autocomplete="given-name" id="charName" placeholder="Rowan"/>
</div>
<div class="field">
<label for="familyName">Family name</label>
<input autocomplete="family-name" id="familyName" placeholder="Thorne"/>
</div>
</div>
</section>
<!-- Background -->
<section class="create-section">
<div class="section-title">
<h3>Background</h3>
<div class="hint">Starting cards, resources, and event bias.</div>
</div>
<div class="field">
<label for="bgSelect">Choose your origin</label>
<select id="bgSelect"></select>
<div class="hint" id="bootMsg" style="margin-top:8px;"></div>
</div>

<div class="field" id="bgStyleField" style="margin-top:10px; display:none;">
  <label for="bgStyleSelect">Choose a style</label>
  <select id="bgStyleSelect"></select>
  <div class="hint" id="bgStyleHint" style="margin-top:6px;"></div>
</div>

</section>
<!-- Stats -->
<section class="create-section">
<div class="section-title row space">
<h3>Stats</h3>
<div class="hint">Remaining <b><span id="allocRemaining">0</span></b> / <span id="allocTotal">0</span></div>
</div>
<div class="hint">Allocate points (max <span id="statCapHint">0</span> per stat). Base starts at 1; your background adds a BG bonus.</div>
<div class="allocGrid" id="allocGrid"></div>
</section>
<!-- Traits -->
<section class="create-section">
<div class="section-title row space">
<h3>Starting Traits</h3>
<div class="hint"><span id="traitsPicked">0</span> / 2 selected</div>
</div>
<div class="hint">Traits are simple, permanent run-start nudges.</div>
<div class="traitsGrid" id="traitsList"></div>
</section>
<div class="create-footer"><button class="btn primary btn-wide" id="btnStart">Begin Run</button><button class="btn ghost btn-wide" id="btnStartBack">Back</button><div class="muted small" id="legacyStartLine">Legacy: 0</div></div>
</div>
</section>
<section class="card hidden" id="legacyScreen">
<div class="row space">
<div>
<h2>Legacy</h2>
<p class="muted">Spend Legacy to strengthen future rulers. Trunk upgrades support any playstyle; branches specialize.</p>
<div class="muted">Available Legacy: <b><span id="legacyTotal">0</span></b></div>
<div class="muted">Available Heirloom Shards: <b><span id="heirloomTotal">0</span></b></div>
<div class="hint">Branches unlock after you’ve unlocked at least one rank in every trunk node.</div>
</div>
<button class="btn ghost" id="btnLegacyBack">Back</button>
</div>
<div class="spacer"></div>
<h3>Trunk</h3>
<div class="legacyList" id="legacyTrunk"></div>
<div class="spacer"></div>
<h3>Branches</h3>
<div class="legacyBranches" id="legacyBranches"></div>
<div class="spacer"></div>
<h3>Heirloom Vault</h3>
<p class="muted">Spend Heirloom Shards to unlock Signature cards. Signature cards are offered to heirs at succession (up to 2 slots if your branch capstone is unlocked).</p>
<div class="legacyList" id="heirloomVault"></div>
</section>

<!-- Game Screen -->
<section class="hidden" id="gameScreen">
<section class="card">
<div class="row space">
<div>
<div class="status" id="statusLine"></div>
<div id="statsLine"></div>
<div class="muted" id="resourceLine"></div>
<div class="muted" id="conditionLine"></div>
<div class="muted" id="standingLine"></div>

<div class="trackerRow" id="trackerRow">
  <div class="trackerPanel" id="ambitionTracker"></div>
  <div class="trackerPanel" id="storyTracker"></div>
</div>
</div>
<div class="pill" id="majorPill" title="Major Event">MAJOR</div>
</div>
</section>
<section class="card">
<div class="row space">
<div>
<div class="event-name" id="eventName"></div>
<div class="muted" id="eventMeta"></div>
</div>
<div class="row" style="gap:8px;">
<button class="btn ghost small" id="btnDebugPickEvent">Debug: Pick Event</button>
<button class="btn ghost small" id="btnDebugLint">Debug: Data Check</button>
</div>
</div>
<p class="prompt" id="eventPrompt"></p>
<div class="outcomes" id="outcomes"></div>
</section>
<section class="card">
<div class="row space">
<h3 id="handTitle">Your Hand</h3>
<div class="muted" id="handHint"></div>
</div>
<div class="row gap handTools">
<button class="btn ghost small" id="btnRedrawHand">Redraw Hand</button>
<button class="btn ghost small" id="btnMulliganHand">Mulligan</button>
<div class="muted small" id="handTokens"></div>
</div>

<div class="slots">
<div class="slot">
<div class="slot-label">Committed 1</div>
<div class="slot-card muted" id="slot1">—</div>
</div>
<div class="slot">
<div class="slot-label">Committed 2</div>
<div class="slot-card muted" id="slot2">—</div>
</div>
</div>
<div class="hand" id="hand"></div>
<div class="row space">
<div>
<div class="chance" id="chanceLine">Select an outcome.</div>
<div class="muted small" id="pairBonusLine"></div>
<div class="muted" id="chanceBreakdown"></div>
</div>
<div class="row" style="gap:8px;">
<button class="btn ghost" disabled="" id="btnChanceMath">Math</button>
<button class="btn primary" disabled="" id="btnResolve">Resolve</button>
</div>
</div>
</section>
<section class="card">
<h3>Log</h3>
<div class="log" id="log"></div>
</section>
</section>
<!-- Modal -->
<div class="backdrop hidden" id="modalBackdrop">
<div class="modal">
<div class="row space">
<h3 id="modalTitle">Debug</h3>
<button class="btn ghost small" id="btnModalClose">Close</button>
</div>
<div id="modalBody"></div>
</div>
</div>
</main>
<footer class="footer muted hidden" id="footerTip">
      Tip: commit cards that match both the event context and the outcome’s allowed disciplines.
    </footer>
</div>
<script defer="" src="app.js"></script>
</body>
</html>
